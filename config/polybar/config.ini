[colors]
bg = #262530
fg = #d9d7c3
fg_mid = #b8b4a9
fg_dim = #8a8880

[global/wm]
screenchange-reload = true
margin-top = 8px

[bar/dark]
monitor = ${env:MONITOR:}
bottom = true
fixed-center = false
width = 100%
height = 24
background = ${colors.bg}
padding = 16px
module-margin = 8px
font-0 = IosevkaSS03:style=Extended:size=8:weight=bold;2

modules-left = i3
modules-right = updates pipewire network cpu memory date menu

wm-restack = i3
enable-ipc = true

[module/i3]
type = internal/i3
format = <label-state>

label-focused = *%index%
label-focused-foreground = ${colors.fg}
label-focused-padding = 4px

label-unfocused = %index%
label-unfocused-foreground = ${colors.fg_dim}
label-unfocused-padding = 4px

label-visible = %index%
label-visible-foreground = ${colors.fg}
label-visible-padding = 4px

label-urgent = !%index%
label-urgent-foreground = ${colors.fg}
label-urgent-padding = 4px

[module/updates]
type = custom/script
exec = ~/.config/polybar/scripts/updates-pacman-aurhelper.sh
interval = 5

label-foreground = ${colors.fg}
label-fail-foreground = ${colors.fg_dim}

[module/pipewire]
type = custom/ipc
hook-0 = ~/.config/polybar/scripts/pipewire.sh
hook-1 = ~/.config/polybar/scripts/pipewire.sh mute
hook-2 = ~/.config/polybar/scripts/pipewire.sh up
hook-3 = ~/.config/polybar/scripts/pipewire.sh down
initial = 1

click-left = "#pipewire.hook.1"
scroll-up = "#pipewire.hook.2"
scroll-down = #pipewire.hook.3"

format-foreground = ${colors.fg}

[module/network]
type = internal/network
interface = enp42s0

label-connected = %local_ip% %netspeed%
label-connected-foreground = ${colors.fg}

label-disconnected = NoNet
label-disconnected-foreground = ${colors.fg_dim}

[module/cpu]
type = internal/cpu
label = %percentage:02%%
label-foreground = ${colors.fg}

[module/memory]
type = internal/memory
label = %gb_used%
label-foreground = ${colors.fg}

[module/weather]
type = custom/script
exec = curl -Ss "https://wttr.in?0&T&Q" | cut -c 16- | head -2 | xargs echo
interval = 300
label-foreground = ${colors.fg}

[module/date]
type = internal/date
interval = 1
time = %a %d %b %y %H:%M:%S
label = %time%
label-foreground = ${colors.fg}

[module/menu]
type = custom/menu
expand-right = false
format-spacing = 6px
format-foreground = ${colors.fg}

label-open = @
label-close = X

menu-0-0 = POW
menu-0-0-exec = menu-open-1

menu-0-1 = REBOOT
menu-0-1-exec = menu-open-2

menu-0-2 = EXIT
menu-0-2-exec = menu-open-3

menu-0-3 = SLEEP
menu-0-3-exec = menu-open-4

menu-1-0 = POWER
menu-1-0-exec = systemctl poweroff

menu-2-0 = REBOOT
menu-2-0-exec = systemctl reboot

menu-3-0 = EXIT
menu-3-0-exec = i3-msg exit

menu-4-0 = SLEEP
menu-4-0-exec = systemctl sleep
